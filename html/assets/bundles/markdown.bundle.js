!function(b){function c(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function d(){var a=require("util");return"Markdown.mk_block( "+a.inspect(this.toString())+", "+a.inspect(this.trailing)+", "+a.inspect(this.lineNumber)+" )"}function e(a){for(var b=0,c=-1;-1!==(c=a.indexOf("\n",c+1));)b++;return b}function f(a,b){function c(a){this.len_after=a,this.name="close_"+b}var d=a+"_state",e="strong"==a?"em_state":"strong_state";return function(f,g){if(this[d][0]==b)return this[d].shift(),[f.length,new c(f.length-b.length)];var h=this[e].slice(),i=this[d].slice();this[d].unshift(b);var j=this.processInline(f.substr(b.length)),k=j[j.length-1];this[d].shift();if(k instanceof c){j.pop();return[f.length-k.len_after,[a].concat(j)]}return this[e]=h,this[d]=i,[b.length,b]}}function g(a){for(var b=a.split(""),c=[""],d=!1;b.length;){var e=b.shift();switch(e){case" ":d?c[c.length-1]+=e:c.push("");break;case"'":case'"':d=!d;break;case"\\":e=b.shift();default:c[c.length-1]+=e}}return c}function h(a){return q(a)&&a.length>1&&"object"==typeof a[1]&&!q(a[1])?a[1]:void 0}function i(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function j(a){if("string"==typeof a)return i(a);var b=a.shift(),c={},d=[];for(!a.length||"object"!=typeof a[0]||a[0]instanceof Array||(c=a.shift());a.length;)d.push(j(a.shift()));var e="";for(var f in c)e+=" "+f+'="'+i(c[f])+'"';return"img"==b||"br"==b||"hr"==b?"<"+b+e+"/>":"<"+b+e+">"+d.join("")+"</"+b+">"}function k(a,b,c){var d;c=c||{};var e=a.slice(0);"function"==typeof c.preprocessTreeNode&&(e=c.preprocessTreeNode(e,b));var f=h(e);if(f){e[1]={};for(d in f)e[1][d]=f[d];f=e[1]}if("string"==typeof e)return e;switch(e[0]){case"header":e[0]="h"+e[1].level,delete e[1].level;break;case"bulletlist":e[0]="ul";break;case"numberlist":e[0]="ol";break;case"listitem":e[0]="li";break;case"para":e[0]="p";break;case"markdown":e[0]="html",f&&delete f.references;break;case"code_block":e[0]="pre",d=f?2:1;var g=["code"];g.push.apply(g,e.splice(d,e.length-d)),e[d]=g;break;case"inlinecode":e[0]="code";break;case"img":e[1].src=e[1].href,delete e[1].href;break;case"linebreak":e[0]="br";break;case"link":e[0]="a";break;case"link_ref":e[0]="a";var i=b[f.ref];if(!i)return f.original;delete f.ref,f.href=i.href,i.title&&(f.title=i.title),delete f.original;break;case"img_ref":e[0]="img";var i=b[f.ref];if(!i)return f.original;delete f.ref,f.src=i.href,i.title&&(f.title=i.title),delete f.original}if(d=1,f){for(var j in e[1]){d=2;break}1===d&&e.splice(d,1)}for(;d<e.length;++d)e[d]=k(e[d],b,c);return e}function l(a){for(var b=h(a)?2:1;b<a.length;)"string"==typeof a[b]?b+1<a.length&&"string"==typeof a[b+1]?a[b]+=a.splice(b+1,1)[0]:++b:(l(a[b]),++b)}var m=b.Markdown=function(a){switch(typeof a){case"undefined":this.dialect=m.dialects.Gruber;break;case"object":this.dialect=a;break;default:if(!(a in m.dialects))throw new Error("Unknown Markdown dialect '"+String(a)+"'");this.dialect=m.dialects[a]}this.em_state=[],this.strong_state=[],this.debug_indent=""};b.parse=function(a,b){return new m(b).toTree(a)},b.toHTML=function(a,c,d){var e=b.toHTMLTree(a,c,d);return b.renderJsonML(e)},b.toHTMLTree=function(a,b,c){"string"==typeof a&&(a=this.parse(a,b));var d=h(a),e={};d&&d.references&&(e=d.references);var f=k(a,e,c);return l(f),f};var n=m.mk_block=function(a,b,e){1==arguments.length&&(b="\n\n");var f=new String(a);return f.trailing=b,f.inspect=d,f.toSource=c,void 0!=e&&(f.lineNumber=e),f};m.prototype.split_blocks=function(a,b){a=a.replace(/(\r\n|\n|\r)/g,"\n");var c,d=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,f=[],g=1;for(null!=(c=/^(\s*\n)/.exec(a))&&(g+=e(c[0]),d.lastIndex=c[0].length);null!==(c=d.exec(a));)"\n#"==c[2]&&(c[2]="\n",d.lastIndex--),f.push(n(c[1],c[2],g)),g+=e(c[0]);return f},m.prototype.processBlock=function(a,b){var c=this.dialect.block,d=c.__order__;if("__call__"in c)return c.__call__.call(this,a,b);for(var e=0;e<d.length;e++){var f=c[d[e]].call(this,a,b);if(f)return(!q(f)||f.length>0&&!q(f[0]))&&this.debug(d[e],"didn't return a proper array"),f}return[]},m.prototype.processInline=function(a){return this.dialect.inline.__call__.call(this,String(a))},m.prototype.toTree=function(a,b){var c=a instanceof Array?a:this.split_blocks(a),d=this.tree;try{for(this.tree=b||this.tree||["markdown"];c.length;){var e=this.processBlock(c.shift(),c);e.length&&this.tree.push.apply(this.tree,e)}return this.tree}finally{b&&(this.tree=d)}},m.prototype.debug=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,a),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,a)},m.prototype.loop_re_over_block=function(a,b,c){for(var d,e=b.valueOf();e.length&&null!=(d=a.exec(e));)e=e.substr(d[0].length),c.call(this,d);return e},m.dialects={},m.dialects.Gruber={block:{atxHeader:function(a,b){var c=a.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(c){var d=["header",{level:c[1].length}];return Array.prototype.push.apply(d,this.processInline(c[2])),c[0].length<a.length&&b.unshift(n(a.substr(c[0].length),a.trailing,a.lineNumber+2)),[d]}},setextHeader:function(a,b){var c=a.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(c){var d="="===c[2]?1:2,e=["header",{level:d},c[1]];return c[0].length<a.length&&b.unshift(n(a.substr(c[0].length),a.trailing,a.lineNumber+2)),[e]}},code:function(a,b){var c=[],d=/^(?: {0,3}\t| {4})(.*)\n?/;if(a.match(d)){a:for(;;){var e=this.loop_re_over_block(d,a.valueOf(),function(a){c.push(a[1])});if(e.length){b.unshift(n(e,a.trailing));break a}if(!b.length)break a;if(!b[0].match(d))break a;c.push(a.trailing.replace(/[^\n]/g,"").substring(2)),a=b.shift()}return[["code_block",c.join("\n")]]}},horizRule:function(a,b){var c=a.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(c){var d=[["hr"]];return c[1]&&d.unshift.apply(d,this.processBlock(c[1],[])),c[3]&&b.unshift(n(c[3])),d}},lists:function(){function a(a){return new RegExp("(?:^("+i+"{0,"+a+"} {0,3})("+f+")\\s+)|(^"+i+"{0,"+(a-1)+"}[ ]{0,4})")}function b(a){return a.replace(/ {0,3}\t/g,"    ")}function c(a,b,c,d){if(b)return void a.push(["para"].concat(c));var e=a[a.length-1]instanceof Array&&"para"==a[a.length-1][0]?a[a.length-1]:a;d&&a.length>1&&c.unshift(d);for(var f=0;f<c.length;f++){var g=c[f];"string"==typeof g&&e.length>1&&"string"==typeof e[e.length-1]?e[e.length-1]+=g:e.push(g)}}function d(a,b){for(var c=new RegExp("^("+i+"{"+a+"}.*?\\n?)*$"),d=new RegExp("^"+i+"{"+a+"}","gm"),e=[];b.length>0&&c.exec(b[0]);){var f=b.shift(),g=f.replace(d,"");e.push(n(g,f.trailing,f.lineNumber))}return e}function e(a,b,c){var d=a.list,e=d[d.length-1];if(!(e[1]instanceof Array&&"para"==e[1][0]))if(b+1==c.length)e.push(["para"].concat(e.splice(1,e.length-1)));else{var f=e.pop();e.push(["para"].concat(e.splice(1,e.length-1)),f)}}var f="[*+-]|\\d+\\.",g=/[*+-]/,h=new RegExp("^( {0,3})("+f+")[ \t]+"),i="(?: {0,3}\\t| {4})";return function(f,i){function j(a){var b=g.exec(a[2])?["bulletlist"]:["numberlist"];return n.push({list:b,indent:a[1]}),b}var k=f.match(h);if(k){for(var l,m,n=[],p=j(k),q=!1,r=[n[0].list];;){for(var s=f.split(/(?=\n)/),t="",u=0;u<s.length;u++){var v="",w=s[u].replace(/^\n/,function(a){return v=a,""}),x=a(n.length);if(k=w.match(x),void 0!==k[1]){t.length&&(c(l,q,this.processInline(t),v),q=!1,t=""),k[1]=b(k[1]);var y=Math.floor(k[1].length/4)+1;if(y>n.length)p=j(k),l.push(p),l=p[1]=["listitem"];else{var z=!1;for(m=0;m<n.length;m++)if(n[m].indent==k[1]){p=n[m].list,n.splice(m+1,n.length-(m+1)),z=!0;break}z||(y++,y<=n.length?(n.splice(y,n.length-y),p=n[y-1].list):(p=j(k),l.push(p))),l=["listitem"],p.push(l)}v=""}w.length>k[0].length&&(t+=v+w.substr(k[0].length))}t.length&&(c(l,q,this.processInline(t),v),q=!1,t="");var A=d(n.length,i);A.length>0&&(o(n,e,this),l.push.apply(l,this.toTree(A,[])));var B=i[0]&&i[0].valueOf()||"";if(!B.match(h)&&!B.match(/^ /))break;f=i.shift();var C=this.dialect.block.horizRule(f,i);if(C){r.push.apply(r,C);break}o(n,e,this),q=!0}return r}}}(),blockquote:function(a,b){if(a.match(/^>/m)){var c=[];if(">"!=a[0]){for(var d=a.split(/\n/),e=[],f=a.lineNumber;d.length&&">"!=d[0][0];)e.push(d.shift()),f++;var g=n(e.join("\n"),"\n",a.lineNumber);c.push.apply(c,this.processBlock(g,[])),a=n(d.join("\n"),a.trailing,f)}for(;b.length&&">"==b[0][0];){var i=b.shift();a=n(a+a.trailing+i,i.trailing,a.lineNumber)}var j=a.replace(/^> ?/gm,""),k=(this.tree,this.toTree(j,["blockquote"])),l=h(k);return l&&l.references&&(delete l.references,r(l)&&k.splice(1,1)),c.push(k),c}},referenceDefn:function(a,b){var c=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(a.match(c)){h(this.tree)||this.tree.splice(1,0,{});var d=h(this.tree);void 0===d.references&&(d.references={});var e=this.loop_re_over_block(c,a,function(a){a[2]&&"<"==a[2][0]&&">"==a[2][a[2].length-1]&&(a[2]=a[2].substring(1,a[2].length-1));var b=d.references[a[1].toLowerCase()]={href:a[2]};void 0!==a[4]?b.title=a[4]:void 0!==a[5]&&(b.title=a[5])});return e.length&&b.unshift(n(e,a.trailing)),[]}},para:function(a,b){return[["para"].concat(this.processInline(a))]}}},m.dialects.Gruber.inline={__oneElement__:function(a,b,c){var d,e;if(b=b||this.dialect.inline.__patterns__,!(d=new RegExp("([\\s\\S]*?)("+(b.source||b)+")").exec(a)))return[a.length,a];if(d[1])return[d[1].length,d[1]];var e;return d[2]in this.dialect.inline&&(e=this.dialect.inline[d[2]].call(this,a.substr(d.index),d,c||[])),e=e||[d[2].length,d[2]]},__call__:function(a,b){function c(a){"string"==typeof a&&"string"==typeof e[e.length-1]?e[e.length-1]+=a:e.push(a)}for(var d,e=[];a.length>0;)d=this.dialect.inline.__oneElement__.call(this,a,b,e),a=a.substr(d.shift()),o(d,c);return e},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(a){return this.dialect.inline.__escape__.exec(a)?[2,a.charAt(1)]:[1,"\\"]},"![":function(a){var b=a.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(b){b[2]&&"<"==b[2][0]&&">"==b[2][b[2].length-1]&&(b[2]=b[2].substring(1,b[2].length-1)),b[2]=this.dialect.inline.__call__.call(this,b[2],/\\/)[0];var c={alt:b[1],href:b[2]||""};return void 0!==b[4]&&(c.title=b[4]),[b[0].length,["img",c]]}return b=a.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),b?[b[0].length,["img_ref",{alt:b[1],ref:b[2].toLowerCase(),original:b[0]}]]:[2,"!["]},"[":function(a){var b=String(a),c=m.DialectHelpers.inline_until_char.call(this,a.substr(1),"]");if(!c)return[1,"["];var d,e,f=1+c[0],g=c[1];a=a.substr(f);var h=a.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(h){var i=h[1];if(f+=h[0].length,i&&"<"==i[0]&&">"==i[i.length-1]&&(i=i.substring(1,i.length-1)),!h[3])for(var j=1,k=0;k<i.length;k++)switch(i[k]){case"(":j++;break;case")":0==--j&&(f-=i.length-k,i=i.substring(0,k))}return i=this.dialect.inline.__call__.call(this,i,/\\/)[0],e={href:i||""},void 0!==h[3]&&(e.title=h[3]),d=["link",e].concat(g),[f,d]}return h=a.match(/^\s*\[(.*?)\]/),h?(f+=h[0].length,e={ref:(h[1]||String(g)).toLowerCase(),original:b.substr(0,f)},d=["link_ref",e].concat(g),[f,d]):1==g.length&&"string"==typeof g[0]?(e={ref:g[0].toLowerCase(),original:b.substr(0,f)},d=["link_ref",e,g[0]],[f,d]):[1,"["]},"<":function(a){var b;return null!=(b=a.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?b[3]?[b[0].length,["link",{href:"mailto:"+b[3]},b[3]]]:"mailto"==b[2]?[b[0].length,["link",{href:b[1]},b[1].substr("mailto:".length)]]:[b[0].length,["link",{href:b[1]},b[1]]]:[1,"<"]},"`":function(a){var b=a.match(/(`+)(([\s\S]*?)\1)/);return b&&b[2]?[b[1].length+b[2].length,["inlinecode",b[3]]]:[1,"`"]},"  \n":function(a){return[3,["linebreak"]]}},m.dialects.Gruber.inline["**"]=f("strong","**"),m.dialects.Gruber.inline.__=f("strong","__"),m.dialects.Gruber.inline["*"]=f("em","*"),m.dialects.Gruber.inline._=f("em","_"),m.buildBlockOrder=function(a){var b=[];for(var c in a)"__order__"!=c&&"__call__"!=c&&b.push(c);a.__order__=b},m.buildInlinePatterns=function(a){var b=[];for(var c in a)if(!c.match(/^__.*__$/)){var d=c.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");b.push(1==c.length?d:"(?:"+d+")")}b=b.join("|"),a.__patterns__=b;var e=a.__call__;a.__call__=function(a,c){return void 0!=c?e.call(this,a,c):e.call(this,a,b)}},m.DialectHelpers={},m.DialectHelpers.inline_until_char=function(a,b){for(var c=0,d=[];;){if(a.charAt(c)==b)return c++,[c,d];if(c>=a.length)return null;var e=this.dialect.inline.__oneElement__.call(this,a.substr(c));c+=e[0],d.push.apply(d,e.slice(1))}},m.subclassDialect=function(a){function b(){}function c(){}return b.prototype=a.block,c.prototype=a.inline,{block:new b,inline:new c}},m.buildBlockOrder(m.dialects.Gruber.block),m.buildInlinePatterns(m.dialects.Gruber.inline),m.dialects.Maruku=m.subclassDialect(m.dialects.Gruber),m.dialects.Maruku.processMetaHash=function(a){for(var b=g(a),c={},d=0;d<b.length;++d)if(/^#/.test(b[d]))c.id=b[d].substring(1);else if(/^\./.test(b[d]))c.class?c.class=c.class+b[d].replace(/./," "):c.class=b[d].substring(1);else if(/\=/.test(b[d])){var e=b[d].split(/\=/);c[e[0]]=e[1]}return c},m.dialects.Maruku.block.document_meta=function(a,b){if(!(a.lineNumber>1)&&a.match(/^(?:\w+:.*\n)*\w+:.*$/)){h(this.tree)||this.tree.splice(1,0,{});var c=a.split(/\n/);for(p in c){var d=c[p].match(/(\w+):\s*(.*)$/),e=d[1].toLowerCase(),f=d[2];this.tree[1][e]=f}return[]}},m.dialects.Maruku.block.block_meta=function(b,c){var d=b.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(d){var e,f=this.dialect.processMetaHash(d[2]);if(""===d[1]){var g=this.tree[this.tree.length-1];if(e=h(g),"string"==typeof g)return;e||(e={},g.splice(1,0,e));for(a in f)e[a]=f[a];return[]}var i=b.replace(/\n.*$/,""),j=this.processBlock(i,[]);e=h(j[0]),e||(e={},j[0].splice(1,0,e));for(a in f)e[a]=f[a];return j}},m.dialects.Maruku.block.definition_list=function(a,b){var c,d,e=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,f=["dl"];if(d=a.match(e)){for(var g=[a];b.length&&e.exec(b[0]);)g.push(b.shift());for(var h=0;h<g.length;++h){var d=g[h].match(e),i=d[1].replace(/\n$/,"").split(/\n/),j=d[2].split(/\n:\s+/);for(c=0;c<i.length;++c)f.push(["dt",i[c]]);for(c=0;c<j.length;++c)f.push(["dd"].concat(this.processInline(j[c].replace(/(\n)\s+/,"$1"))))}return[f]}},m.dialects.Maruku.block.table=function(a,b){var c,d,e=function(a,b){b=b||"\\s",b.match(/^[\\|\[\]{}?*.+^$]$/)&&(b="\\"+b);for(var c,d=[],e=new RegExp("^((?:\\\\.|[^\\\\"+b+"])*)"+b+"(.*)");c=a.match(e);)d.push(c[1]),a=c[2];return d.push(a),d},f=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,g=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(d=a.match(f))d[3]=d[3].replace(/^\s*\|/gm,"");else if(!(d=a.match(g)))return;var h=["table",["thead",["tr"]],["tbody"]];d[2]=d[2].replace(/\|\s*$/,"").split("|");var i=[];for(o(d[2],function(a){a.match(/^\s*-+:\s*$/)?i.push({align:"right"}):a.match(/^\s*:-+\s*$/)?i.push({align:"left"}):a.match(/^\s*:-+:\s*$/)?i.push({align:"center"}):i.push({})}),d[1]=e(d[1].replace(/\|\s*$/,""),"|"),c=0;c<d[1].length;c++)h[1][1].push(["th",i[c]||{}].concat(this.processInline(d[1][c].trim())));return o(d[3].replace(/\|\s*$/gm,"").split("\n"),function(a){var b=["tr"];for(a=e(a,"|"),c=0;c<a.length;c++)b.push(["td",i[c]||{}].concat(this.processInline(a[c].trim())));h[2].push(b)},this),[h]},m.dialects.Maruku.inline["{:"]=function(a,b,c){if(!c.length)return[2,"{:"];var d=c[c.length-1];if("string"==typeof d)return[2,"{:"];var e=a.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!e)return[2,"{:"];var f=this.dialect.processMetaHash(e[1]),g=h(d);g||(g={},d.splice(1,0,g));for(var i in f)g[i]=f[i];return[e[0].length,""]},m.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,m.buildBlockOrder(m.dialects.Maruku.block),m.buildInlinePatterns(m.dialects.Maruku.inline);var o,q=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)};o=Array.prototype.forEach?function(a,b,c){return a.forEach(b,c)}:function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||a,a[d],d,a)};var r=function(a){for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0};b.renderJsonML=function(a,b){b=b||{},b.root=b.root||!1;var c=[];if(b.root)c.push(j(a));else for(a.shift(),!a.length||"object"!=typeof a[0]||a[0]instanceof Array||a.shift();a.length;)c.push(j(a.shift()));return c.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.toMarkdown=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return-1!==t.indexOf(a.nodeName.toLowerCase())}function e(a){return-1!==u.indexOf(a.nodeName.toLowerCase())}function f(a){var b=(new r).parseFromString(a,"text/html");return s(b.documentElement,d),b}function g(a){for(var b,c,d,e=[a],f=[];e.length>0;)for(b=e.shift(),f.push(b),c=b.childNodes,d=0;d<c.length;d++)1===c[d].nodeType&&e.push(c[d]);return f.shift(),f}function h(a){for(var b="",c=0;c<a.childNodes.length;c++)if(1===a.childNodes[c].nodeType)b+=a.childNodes[c]._replacement;else{if(3!==a.childNodes[c].nodeType)continue;b+=a.childNodes[c].data}return b}function i(a,b){return a.cloneNode(!1).outerHTML.replace("><",">"+b+"<")}function j(a,b){if("string"==typeof b)return b===a.nodeName.toLowerCase();if(Array.isArray(b))return-1!==b.indexOf(a.nodeName.toLowerCase());if("function"==typeof b)return b.call(n,a);throw new TypeError("`filter` needs to be a string, array, or function")}function k(a,b){var c,e,f;return"left"===a?(c=b.previousSibling,e=/ $/):(c=b.nextSibling,e=/^ /),c&&(3===c.nodeType?f=e.test(c.nodeValue):1!==c.nodeType||d(c)||(f=e.test(c.textContent))),f}function l(a,b){var c="",e="";if(!d(a)){var f=/^[ \r\n\t]/.test(b),g=/[ \r\n\t]$/.test(b);f&&!k("left",a)&&(c=" "),g&&!k("right",a)&&(e=" ")}return{leading:c,trailing:e}}function m(a){var b,c=h(a);if(!e(a)&&!/A|TH|TD/.test(a.nodeName)&&/^\s*$/i.test(c))return void(a._replacement="");for(var d=0;d<o.length;d++){var f=o[d];if(j(a,f.filter)){if("function"!=typeof f.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var g=l(a,c);(g.leading||g.trailing)&&(c=c.trim()),b=g.leading+f.replacement.call(n,c,a)+g.trailing;break}}a._replacement=b}var n,o,p=a("./lib/md-converters"),q=a("./lib/gfm-converters"),r=a("./lib/html-parser"),s=a("collapse-whitespace"),t=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],u=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];n=function(a,b){if(b=b||{},"string"!=typeof a)throw new TypeError(a+" is not a string");if(""===a)return"";a=a.replace(/(\d+)\. /g,"$1\\. ");var c,d=f(a).body,e=g(d);o=p.slice(0),b.gfm&&(o=q.concat(o)),b.converters&&(o=b.converters.concat(o));for(var i=e.length-1;i>=0;i--)m(e[i]);return c=h(d),c.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")},n.isBlock=d,n.isVoid=e,n.outer=i,b.exports=n},{"./lib/gfm-converters":2,"./lib/html-parser":3,"./lib/md-converters":4,"collapse-whitespace":7}],2:[function(a,b,c){"use strict";function d(a,b){var c=Array.prototype.indexOf.call(b.parentNode.childNodes,b),d=" ";return 0===c&&(d="| "),d+a+" |"}var e=/highlight highlight-(\S+)/;b.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(a){return"~~"+a+"~~"}},{filter:function(a){return"checkbox"===a.type&&"LI"===a.parentNode.nodeName},replacement:function(a,b){return(b.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(a,b){return d(a,b)}},{filter:"tr",replacement:function(a,b){var c="",e={left:":--",right:"--:",center:":-:"};if("THEAD"===b.parentNode.nodeName)for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f].attributes.align,h="---";g&&(h=e[g.value]||h),c+=d(h,b.childNodes[f])}return"\n"+a+(c?"\n"+c:"")}},{filter:"table",replacement:function(a){return"\n\n"+a+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(a){return a}},{filter:function(a){return"PRE"===a.nodeName&&a.firstChild&&"CODE"===a.firstChild.nodeName},replacement:function(a,b){return"\n\n```\n"+b.firstChild.textContent+"\n```\n\n"}},{filter:function(a){return"PRE"===a.nodeName&&"DIV"===a.parentNode.nodeName&&e.test(a.parentNode.className)},replacement:function(a,b){return"\n\n```"+b.parentNode.className.match(e)[1]+"\n"+b.textContent+"\n```\n\n"}},{filter:function(a){return"DIV"===a.nodeName&&e.test(a.className)},replacement:function(a){return"\n\n"+a+"\n\n"}}]},{}],3:[function(a,b,c){function d(){var a=!1;try{document.implementation.createHTMLDocument("").open()}catch(b){window.ActiveXObject&&(a=!0)}return a}var e="undefined"!=typeof window?window:this;b.exports=function(){var a=e.DOMParser,b=!1;try{(new a).parseFromString("","text/html")&&(b=!0)}catch(a){}return b}()?e.DOMParser:function(){var b=function(){};if("undefined"==typeof document){var c=a("jsdom");b.prototype.parseFromString=function(a){return c.jsdom(a,{features:{FetchExternalResources:[],ProcessExternalResources:!1}})}}else d()?b.prototype.parseFromString=function(a){var b=new window.ActiveXObject("htmlfile");return b.designMode="on",b.open(),b.write(a),b.close(),b}:b.prototype.parseFromString=function(a){var b=document.implementation.createHTMLDocument("");return b.open(),b.write(a),b.close(),b};return b}()},{jsdom:6}],4:[function(a,b,c){"use strict";b.exports=[{filter:"p",replacement:function(a){return"\n\n"+a+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(a,b){for(var c=b.nodeName.charAt(1),d="",e=0;e<c;e++)d+="#";return"\n\n"+d+" "+a+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(a){return"_"+a+"_"}},{filter:["strong","b"],replacement:function(a){return"**"+a+"**"}},{filter:function(a){var b=a.previousSibling||a.nextSibling,c="PRE"===a.parentNode.nodeName&&!b;return"CODE"===a.nodeName&&!c},replacement:function(a){return"`"+a+"`"}},{filter:function(a){return"A"===a.nodeName&&a.getAttribute("href")},replacement:function(a,b){var c=b.title?' "'+b.title+'"':"";return"["+a+"]("+b.getAttribute("href")+c+")"}},{filter:"img",replacement:function(a,b){var c=b.alt||"",d=b.getAttribute("src")||"",e=b.title||"",f=e?' "'+e+'"':"";return d?"!["+c+"]("+d+f+")":""}},{filter:function(a){return"PRE"===a.nodeName&&"CODE"===a.firstChild.nodeName},replacement:function(a,b){return"\n\n    "+b.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(a){return a=a.trim(),a=a.replace(/\n{3,}/g,"\n\n"),"\n\n"+(a=a.replace(/^/gm,"> "))+"\n\n"}},{filter:"li",replacement:function(a,b){a=a.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var c=b.parentNode,d=Array.prototype.indexOf.call(c.children,b)+1;return(/ol/i.test(c.nodeName)?d+".  ":"*   ")+a}},{filter:["ul","ol"],replacement:function(a,b){for(var c=[],d=0;d<b.childNodes.length;d++)c.push(b.childNodes[d]._replacement);return/li/i.test(b.parentNode.nodeName)?"\n"+c.join("\n"):"\n\n"+c.join("\n")+"\n\n"}},{filter:function(a){return this.isBlock(a)},replacement:function(a,b){return"\n\n"+this.outer(b,a)+"\n\n"}},{filter:function(){return!0},replacement:function(a,b){return this.outer(b,a)}}]},{}],5:[function(a,b,c){b.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],6:[function(a,b,c){},{}],7:[function(a,b,c){"use strict";function d(a){return!(!a||!j[a.nodeName])}function e(a){return!(!a||!i[a.nodeName])}function f(a,b){if(a.firstChild&&"PRE"!==a.nodeName){"function"!=typeof b&&(b=d);for(var c=null,f=!1,i=null,j=h(i,a);j!==a;){if(3===j.nodeType){var k=j.data.replace(/[ \r\n\t]+/g," ");if(c&&!/ $/.test(c.data)||f||" "!==k[0]||(k=k.substr(1)),!k){j=g(j);continue}j.data=k,c=j}else{if(1!==j.nodeType){j=g(j);continue}b(j)||"BR"===j.nodeName?(c&&(c.data=c.data.replace(/ $/,"")),c=null,f=!1):e(j)&&(c=null,f=!0)}var l=h(i,j);i=j,j=l}c&&(c.data=c.data.replace(/ $/,""),c.data||g(c))}}function g(a){var b=a.nextSibling||a.parentNode;return a.parentNode.removeChild(a),b}function h(a,b){return a&&a.parentNode===b||"PRE"===b.nodeName?b.nextSibling||b.parentNode:b.firstChild||b.nextSibling||b.parentNode}var i=a("void-elements");Object.keys(i).forEach(function(a){i[a.toUpperCase()]=1});var j={};a("block-elements").forEach(function(a){j[a.toUpperCase()]=1}),b.exports=f},{"block-elements":5,"void-elements":8}],8:[function(a,b,c){b.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},{}]},{},[1])(1)}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";var b=function(b,c){var d=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];a.each(d,function(d,e){void 0!==a(b).data(e)&&(c="object"==typeof c?c:{},c[e]=a(b).data(e))}),this.$ns="bootstrap-markdown",this.$element=a(b),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=a.extend(!0,{},a.fn.markdown.defaults,c,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};b.prototype={constructor:b,__alterButtons:function(b,c){var d=this.$handler,e="all"==b,f=this;a.each(d,function(a,d){var g=!0;!1===(g=!e&&d.indexOf(b)<0)&&c(f.$editor.find('button[data-handler="'+d+'"]'))})},__buildButtons:function(b,c){var d,e=this.$ns,f=this.$handler,g=this.$callback;for(d=0;d<b.length;d++){var h,i=b[d];for(h=0;h<i.length;h++){var j,k=i[h].data,l=a("<div/>",{class:"btn-group"});for(j=0;j<k.length;j++){var m,n,o=k[j],p=e+"-"+o.name,q=this.__getIcon(o.icon),r=o.btnText?o.btnText:"",s=o.btnClass?o.btnClass:"btn",t=o.tabIndex?o.tabIndex:"-1",u=void 0!==o.hotkey?o.hotkey:"",v=void 0!==jQuery.hotkeys&&""!==u?" ("+u+")":"";m=a("<button></button>"),m.text(" "+this.__localize(r)).addClass("btn-default").addClass(s),s.match(/btn\-(primary|success|info|warning|danger|link)/)&&m.removeClass("btn-default"),m.attr({type:"button",title:this.__localize(o.title)+v,tabindex:t,"data-provider":e,"data-handler":p,"data-hotkey":u}),!0===o.toggle&&m.attr("data-toggle","button"),n=a("<span/>"),n.addClass(q),n.prependTo(m),l.append(m),f.push(p),g.push(o.callback)}c.append(l)}}return c},__setListener:function(){var b=void 0!==this.$textarea.attr("rows"),c=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",d=b?this.$textarea.attr("rows"):c;this.$textarea.attr("rows",d),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:a.proxy(this.focus,this),keyup:a.proxy(this.keyup,this),change:a.proxy(this.change,this),select:a.proxy(this.select,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",a.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",a.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(b){var c=a(b.currentTarget),d=this.$handler,e=this.$callback,f=c.attr("data-handler"),g=d.indexOf(f),h=e[g];a(b.currentTarget).focus(),h(this),this.change(this),f.indexOf("cmdSave")<0&&this.$textarea.focus(),b.preventDefault()},__localize:function(b){var c=a.fn.markdown.messages,d=this.$options.language;return void 0!==c&&void 0!==c[d]&&void 0!==c[d][b]?c[d][b]:b},__getIcon:function(a){return"object"==typeof a?a[this.$options.iconlibrary]:a},setFullscreen:function(b){var c=this.$editor,d=this.$textarea;!0===b?(c.addClass("md-fullscreen-mode"),a("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(c.removeClass("md-fullscreen-mode"),a("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=b,d.focus()},showEditor:function(){var b,c=this,d=this.$ns,e=this.$element,f=(e.css("height"),e.css("width"),this.$editable),g=this.$handler,h=this.$callback,i=this.$options,j=a("<div/>",{class:"md-editor",click:function(){c.focus()}});if(null===this.$editor){var k=a("<div/>",{class:"md-header btn-toolbar"}),l=[];if(i.buttons.length>0&&(l=l.concat(i.buttons[0])),i.additionalButtons.length>0&&a.each(i.additionalButtons[0],function(b,c){var d=a.grep(l,function(a,b){return a.name===c.name});d.length>0?d[0].data=d[0].data.concat(c.data):l.push(i.additionalButtons[0][b])}),i.reorderButtonGroups.length>0&&(l=l.filter(function(a){return i.reorderButtonGroups.indexOf(a.name)>-1}).sort(function(a,b){return i.reorderButtonGroups.indexOf(a.name)<i.reorderButtonGroups.indexOf(b.name)?-1:i.reorderButtonGroups.indexOf(a.name)>i.reorderButtonGroups.indexOf(b.name)?1:0})),l.length>0&&(k=this.__buildButtons([l],k)),i.fullscreen.enable&&k.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="javascript:void(0);"><span class="'+this.__getIcon(i.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(a){a.preventDefault(),c.setFullscreen(!0)}),j.append(k),e.is("textarea"))e.before(j),b=e,b.addClass("md-input"),j.append(b);else{var m="function"==typeof toMarkdown?toMarkdown(e.html()):e.html(),n=a.trim(m);b=a("<textarea/>",{class:"md-input",val:n}),j.append(b),f.el=e,f.type=e.prop("tagName").toLowerCase(),f.content=e.html(),a(e[0].attributes).each(function(){f.attrKeys.push(this.nodeName),f.attrValues.push(this.nodeValue)}),e.replaceWith(j)}var o=a("<div/>",{class:"md-footer"}),p=!1,q="";if(i.savable){p=!0;g.push("cmdSave"),h.push(i.onSave),o.append('<button class="btn btn-success" data-provider="'+d+'" data-handler="cmdSave"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(q="function"==typeof i.footer?i.footer(this):i.footer,""!==a.trim(q)&&(p=!0,o.append(q)),p&&j.append(o),i.width&&"inherit"!==i.width&&(jQuery.isNumeric(i.width)?(j.css("display","table"),b.css("width",i.width+"px")):j.addClass(i.width)),i.height&&"inherit"!==i.height)if(jQuery.isNumeric(i.height)){var r=i.height;k&&(r=Math.max(0,r-k.outerHeight())),o&&(r=Math.max(0,r-o.outerHeight())),b.css("height",r+"px")}else j.addClass(i.height);this.$editor=j,this.$textarea=b,this.$editable=f,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',a.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&k.find('[data-provider="bootstrap-markdown"]').each(function(){var c=a(this),d=c.attr("data-hotkey")
;""!==d.toLowerCase()&&b.bind("keydown",d,function(){return c.trigger("click"),!1})}),"preview"===i.initialstate?this.showPreview():"fullscreen"===i.initialstate&&i.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return i.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),i.fullscreen.enable&&!1!==i.fullscreen&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="javascript:void(0);" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(i.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(a){a.preventDefault(),c.setFullscreen(!1)})),this.hideButtons(i.hiddenButtons),this.disableButtons(i.disabledButtons),i.onShow(this),this},parseContent:function(a){var a=a||this.$textarea.val();return this.$options.parser?this.$options.parser(a):"object"==typeof markdown?markdown.toHTML(a):"function"==typeof marked?marked(a):a},showPreview:function(){var b,c,d=this.$options,e=this.$textarea,f=e.next(),g=a("<div/>",{class:"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),c=d.onPreview(this),b="string"==typeof c?c:this.parseContent(),g.html(b),f&&"md-footer"==f.attr("class")?g.insertBefore(f):e.parent().append(g),g.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px"}),this.$options.resize&&g.css("resize",this.$options.resize),e.hide(),g.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){return this.$isPreview=!1,this.$editor.find('div[data-provider="markdown-preview"]').remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(a){return this.$textarea.val(a),this},findSelection:function(a){var b,c=this.getContent();if((b=c.indexOf(a))>=0&&a.length>0){var d,e=this.getSelection();return this.setSelection(b,b+a.length),d=this.getSelection(),this.setSelection(e.start,e.end),d}return null},getSelection:function(){var a=this.$textarea[0];return("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||function(){return null})()},setSelection:function(a,b){var c=this.$textarea[0];return("selectionStart"in c&&function(){c.selectionStart=a,c.selectionEnd=b}||function(){return null})()},replaceSelection:function(a){var b=this.$textarea[0];return("selectionStart"in b&&function(){return b.value=b.value.substr(0,b.selectionStart)+a+b.value.substr(b.selectionEnd,b.value.length),b.selectionStart=b.value.length,this}||function(){return b.value+=a,jQuery(b)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var a,b=this.$nextTab.shift();return"function"==typeof b?a=b():"object"==typeof b&&b.length>0&&(a=b),a},setNextTab:function(a,b){if("string"==typeof a){var c=this;this.$nextTab.push(function(){return c.findSelection(a)})}else if("number"==typeof a&&"number"==typeof b){var d=this.getSelection();this.setSelection(a,b),this.$nextTab.push(this.getSelection()),this.setSelection(d.start,d.end)}},__parseButtonNameParam:function(a){return"string"==typeof a?a.split(" "):a},enableButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.removeAttr("disabled")})}),this},disableButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.attr("disabled","disabled")})}),this},hideButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.addClass("hidden")})}),this},showButtons:function(b){var c=this.__parseButtonNameParam(b),d=this;return a.each(c,function(a,b){d.__alterButtons(c[a],function(a){a.removeClass("hidden")})}),this},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},keyup:function(a){var b=!1;switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var c;if(null!==(c=this.getNextTab())){var d=this;setTimeout(function(){d.setSelection(c.start,c.end)},500),b=!0}else{var e=this.getSelection();e.start==e.end&&e.end==this.getContent().length?b=!1:(this.setSelection(this.getContent().length,this.getContent().length),b=!0)}break;case 13:b=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),b=!1;break;default:b=!1}b&&(a.stopPropagation(),a.preventDefault()),this.$options.onChange(this)},change:function(a){return this.$options.onChange(this),this},select:function(a){return this.$options.onSelect(this),this},focus:function(b){var c=this.$options,d=(c.hideable,this.$editor);return d.addClass("active"),a(document).find(".md-editor").each(function(){if(a(this).attr("id")!==d.attr("id")){var b;null===(b=a(this).find("textarea").data("markdown"))&&(b=a(this).find('div[data-provider="markdown-preview"]').data("markdown")),b&&b.blur()}}),c.onFocus(this),this},blur:function(b){var c=this.$options,d=c.hideable,e=this.$editor,f=this.$editable;if(e.hasClass("active")||0===this.$element.parent().length){if(e.removeClass("active"),d)if(null!==f.el){var g=a("<"+f.type+"/>"),h=this.getContent(),i=this.parseContent(h);a(f.attrKeys).each(function(a,b){g.attr(f.attrKeys[a],f.attrValues[a])}),g.html(i),e.replaceWith(g)}else e.hide();c.onBlur(this)}return this}};var c=a.fn.markdown;a.fn.markdown=function(c){return this.each(function(){var d=a(this),e=d.data("markdown"),f="object"==typeof c&&c;e||d.data("markdown",e=new b(this,f))})},a.fn.markdown.messages={},a.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("strong text"):d.text,"**"===e.substr(d.start-2,2)&&"**"===e.substr(d.end,2)?(a.setSelection(d.start-2,d.end+2),a.replaceSelection(b),c=d.start-2):(a.replaceSelection("**"+b+"**"),c=d.start+2),a.setSelection(c,c+b.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("emphasized text"):d.text,"_"===e.substr(d.start-1,1)&&"_"===e.substr(d.end,1)?(a.setSelection(d.start-1,d.end+1),a.replaceSelection(b),c=d.start-1):(a.replaceSelection("_"+b+"_"),c=d.start+1),a.setSelection(c,c+b.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(a){var b,c,d,e,f=a.getSelection(),g=a.getContent();b=0===f.length?a.__localize("heading text"):f.text+"\n",d=4,"### "===g.substr(f.start-d,d)||(d=3,"###"===g.substr(f.start-d,d))?(a.setSelection(f.start-d,f.end),a.replaceSelection(b),c=f.start-d):f.start>0&&!!(e=g.substr(f.start-1,1))&&"\n"!=e?(a.replaceSelection("\n\n### "+b),c=f.start+6):(a.replaceSelection("### "+b),c=f.start+4),a.setSelection(c,c+b.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(b){var c,d,e,f=b.getSelection();b.getContent();c=0===f.length?b.__localize("enter link description here"):f.text,e=prompt(b.__localize("Insert Hyperlink"),"http://");var g=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==e&&""!==e&&"http://"!==e&&g.test(e)){var h=a("<div>"+e+"</div>").text();b.replaceSelection("["+c+"]("+h+")"),d=f.start+1,b.setSelection(d,d+c.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(b){var c,d,e,f=b.getSelection();b.getContent();c=0===f.length?b.__localize("enter image description here"):f.text,e=prompt(b.__localize("Insert Image Hyperlink"),"http://");var g=new RegExp("^((http|https)://|(//))[a-z0-9]","i");if(null!==e&&""!==e&&"http://"!==e&&g.test(e)){var h=a("<div>"+e+"</div>").text();b.replaceSelection("!["+c+"]("+h+' "'+b.__localize("enter image title here")+'")'),d=f.start+2,b.setNextTab(b.__localize("enter image title here")),b.setSelection(d,d+c.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("list text here"),b.replaceSelection("- "+c),d=e.start+2;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("- "+c),d=e.start+2;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="- "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+4}b.setSelection(d,d+c.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("list text here"),b.replaceSelection("1. "+c),d=e.start+3;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("1. "+c),d=e.start+3;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="1. "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+5}b.setSelection(d,d+c.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(a){var b,c,d=a.getSelection(),e=a.getContent();b=0===d.length?a.__localize("code text here"):d.text,"```\n"===e.substr(d.start-4,4)&&"\n```"===e.substr(d.end,4)?(a.setSelection(d.start-4,d.end+4),a.replaceSelection(b),c=d.start-4):"`"===e.substr(d.start-1,1)&&"`"===e.substr(d.end,1)?(a.setSelection(d.start-1,d.end+1),a.replaceSelection(b),c=d.start-1):e.indexOf("\n")>-1?(a.replaceSelection("```\n"+b+"\n```"),c=d.start+4):(a.replaceSelection("`"+b+"`"),c=d.start+1),a.setSelection(c,c+b.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(b){var c,d,e=b.getSelection();b.getContent();if(0===e.length)c=b.__localize("quote here"),b.replaceSelection("> "+c),d=e.start+2;else if(e.text.indexOf("\n")<0)c=e.text,b.replaceSelection("> "+c),d=e.start+2;else{var f=[];f=e.text.split("\n"),c=f[0],a.each(f,function(a,b){f[a]="> "+b}),b.replaceSelection("\n\n"+f.join("\n")),d=e.start+4}b.setSelection(d,d+c.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(a){var b=a.$isPreview;!1===b?a.showPreview():a.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(a){},onPreview:function(a){},onSave:function(a){},onBlur:function(a){},onFocus:function(a){},onChange:function(a){},onFullscreen:function(a){},onSelect:function(a){}},a.fn.markdown.Constructor=b,a.fn.markdown.noConflict=function(){return a.fn.markdown=c,this};var d=function(a){var b=a;if(b.data("markdown"))return void b.data("markdown").showEditor();b.markdown()},e=function(b){var c=a(document.activeElement);a(document).find(".md-editor").each(function(){var b=a(this),d=c.closest(".md-editor")[0]===this,e=b.find("textarea").data("markdown")||b.find('div[data-provider="markdown-preview"]').data("markdown");e&&!d&&e.blur()})};a(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(b){d(a(this)),b.preventDefault()}).on("click focusin",function(a){e()}).ready(function(){a('textarea[data-provide="markdown"]').each(function(){d(a(this))})})});